<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>商品列表</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <!-- jquery -->
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <!-- bootstrap -->
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}"/>
    <link  th:href="@{/assets/css/style.css}" rel="stylesheet">
    <link  th:href="@{/font-awesome/css/font-awesome.css}" rel="stylesheet">
    <link  th:href="@{/assets/css/animate.css}" rel="stylesheet">
    <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
    <!-- jquery-validator -->
    <script type="text/javascript" th:src="@{/jquery-validation/jquery.validate.min.js}"></script>
    <script type="text/javascript" th:src="@{/jquery-validation/localization/messages_zh.min.js}"></script>
    <!-- layer -->
    <script type="text/javascript" th:src="@{/layer/layer.js}"></script>
    <!--vue-->
    <script th:src="@{/js/axios.min.js}"></script>
    <script th:src="@{/js/vue.min.js}"></script>
    <!-- md5.js -->
    <script type="text/javascript" th:src="@{/js/md5.min.js}"></script>
    <!-- common.js -->
    <script type="text/javascript" th:src="@{/js/common.js}"></script>
    <style type="text/css">
        html, body {
            height: 100%;
            width: 100%;
        }

        body {
            background:  no-repeat;
            background-size: 100% 100%;
        }

        #goodslist td {
            border-top: 1px solid #39503f61;
        }
    </style>
</head>
<body class="top-navigation">
<div id="table" class="panel panel-default" style="height:100%;background-color:rgba(222,222,222,0.8)">
    <div id="nav" class="row border-bottom white-bg">
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-header">
                <button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse"
                        class="navbar-toggle collapsed" type="button">
                    <i class="fa fa-reorder"></i>
                </button>
                <a href="#" class="navbar-brand">秒杀系统</a>
            </div>
            <div class="navbar-collapse collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="dropdown">
                        <a aria-expanded="false" role="button" th:href="@{/orders}"> 我的订单</a>
                    </li>

                    <li class="dropdown">
                        <a aria-expanded="false" role="button" th:href="@{/secGoodList}"> 所有秒杀商品</a>
                    </li>
                </ul>
                <ul class="nav navbar-top-links navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle count-info" th:href="@{/myself}">
                            <!--                            信息条数-->
                            <i class="glyphicon glyphicon-user"></i> <span class="label label-warning"></span>
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/login}">
                            <i class="fa fa-sign-out"></i> 退出登录
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <table class="table" id="goodslist">
        <tr>
            <td>商品名称</td>
            <td>商品图片</td>
            <td>商品原价</td>
            <td>秒杀价</td>
            <td>库存数量</td>
        </tr>
        <tr v-for="item in goods" >
            <td><a :href="'secGoodDetail/'+item.goodsId">{{item.goodsName}}</a></td>
            <td><img :src="item.goodsImg" width="100" height="100"/></td>
            <td>{{item.goodsPrice}}</td>
            <td>{{item.seckillPrice}}</td>
            <td>{{item.stockCount}}</td>
        </tr>
    </table>
</div>

<script th:src="@{/js/sweetalert.min.js}"></script>
<script type="text/javascript">
    new Vue({
        el:'#table',
        data:{
            goods:[]
        },
        mounted:function(){
            var self=this;
            axios({
                method: 'get',
                url: 'secGoods',
            }).then(response=>{
                self.goods=response.data.result.data;
            }).catch(response=>{
                alert(response);
            });
        }
    });
</script>
</body>
</html>
